"use strict";const t=require("../../common/vendor.js"),e=require("../../config/config.js"),o=require("../../utils/api.js"),s={components:{Loading:()=>"../../components/Loading.js",Accessstatistics:()=>"./components/Accessstatistics.js",Customerdistribution:()=>"./components/Customerdistribution.js",FloatingButtons:()=>"../../components/FloatingButtons.js"},data:()=>({userInfo:{},expList:[],projects:[],currentProjectsIndex:0,loadings:!0}),async onLoad(){this.loadings=!0,await this.loadData()},onReady(){},onShareAppMessage:()=>({title:"乔布斯于科技世界种下创新种子，罗永浩在行业浪潮里坚守情怀高地，都让我着迷。我仿佛看到老罗和乔布斯在科技和人文的十字路口探讨人生，所以我带着这份情怀，期待在这里与你相遇。",path:"/pages/splash/splash",imageUrl:"https://www.sundongliang.cn/static/images/share.jpg",success:function(t){console.log("分享成功")},fail:function(t){console.log("分享失败")}}),mounted(){},methods:{async loadData(){try{const[t,e,s]=await Promise.all([o.ApiService.index.info(),o.ApiService.user.getTechnologies(),o.ApiService.project.getFeatured()]);this.userInfo=t,this.expList=e,this.projects=s,this.logPageVisit(),setTimeout((()=>{this.loadings=!1}),1500)}catch(e){o.ApiErrorHandler.handle(e),t.index.showToast({title:"加载失败请重新打开",icon:"none",duration:2e3})}},async logPageVisit(){try{const t={page:"/pages/index/index",referer:"undefined"!=typeof document&&document.referrer?document.referrer:"",user_agent:"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent:""};await o.ApiService.visit.log(t)}catch(t){console.error("访问日志记录失败:",t)}},getStaticUrl:t=>e.CONFIG_UTILS.getStaticUrl(t),onProjectsSwiperChange(t){this.currentProjectsIndex=t.detail.current},goToProjectsIndex(t){this.currentProjectsIndex=t},showProjectDetail(e){t.index.navigateTo({url:`/pages/project/detail?id=${e.id}`})},goToProjects(){t.index.navigateTo({url:"/pages/projects/projects"})},goToContact(){t.index.navigateTo({url:"/pages/contact/contact"})},goToAdmin(){const e=t.index.getStorageSync("wechat_token");t.index.getStorageSync("userInfo"),e?t.index.navigateTo({url:"/pages/admin/dashboard"}):t.index.showToast({title:"没有管理员权限",icon:"none",duration:2e3})}}};if(!Array){(t.resolveComponent("Loading")+t.resolveComponent("Customerdistribution")+t.resolveComponent("Accessstatistics")+t.resolveComponent("FloatingButtons"))()}const i=t._export_sfc(s,[["render",function(e,o,s,i,a,n){return{a:a.loadings,b:n.getStaticUrl("/static/svg/github.svg"),c:n.getStaticUrl("/static/svg/douyin.svg"),d:n.getStaticUrl("/static/svg/config.svg"),e:t.o(((...t)=>n.goToAdmin&&n.goToAdmin(...t))),f:t.o(((...t)=>n.goToProjects&&n.goToProjects(...t))),g:n.getStaticUrl(a.userInfo.avatar||"/static/images/default-avatar.jpg"),h:n.getStaticUrl("/static/svg/verify.svg"),i:n.getStaticUrl("/static/gif/code.gif"),j:t.t(a.userInfo.code_age),k:n.getStaticUrl("/static/svg/wechat-info.svg"),l:t.t(a.userInfo.wechat),m:n.getStaticUrl("/static/svg/qq-info.svg"),n:t.t(a.userInfo.qq),o:n.getStaticUrl("/static/svg/phone-info.svg"),p:t.t(a.userInfo.phone),q:n.getStaticUrl("/static/svg/email-info.svg"),r:t.t(a.userInfo.email),s:t.o(((...t)=>n.goToContact&&n.goToContact(...t))),t:t.t(a.userInfo.nickname),v:t.t(a.userInfo.site_description),w:t.t(a.userInfo.subdescription),x:n.getStaticUrl("/static/images/box/book_icon_1.svg"),y:n.getStaticUrl("/static/images/box/book_icon_shu1.svg"),z:n.getStaticUrl("/static/images/box/book_icon_shu2.svg"),A:n.getStaticUrl("/static/images/box/book_icon_shu3.svg"),B:n.getStaticUrl("/static/images/box/book_icon_2.svg"),C:n.getStaticUrl("/static/images/box/book_icon_3.svg"),D:n.getStaticUrl("/static/images/box/app_icon_1.svg"),E:n.getStaticUrl("/static/images/box/app_icon_app.svg"),F:n.getStaticUrl("/static/images/box/app_icon_2.svg"),G:n.getStaticUrl("/static/images/box/app_icon_3.svg"),H:n.getStaticUrl("/static/svg/html5.svg"),I:t.f(a.expList,((t,e,o)=>({a:n.getStaticUrl(t.img||"/static/images/default-tech.png"),b:t.name}))),J:n.getStaticUrl("/static/svg/project.svg"),K:t.f(a.projects,((e,o,s)=>({a:n.getStaticUrl(e.image||"/static/images/default-project.png"),b:t.t(e.title),c:t.t(e.description),d:t.f(e.technologies,((t,e,o)=>({a:n.getStaticUrl(t.img||"/static/images/default-tech.png"),b:t.id}))),e:t.o((t=>n.showProjectDetail(e)),o),f:o}))),L:t.o(((...t)=>n.onProjectsSwiperChange&&n.onProjectsSwiperChange(...t))),M:t.f(a.projects,((e,o,s)=>({a:o,b:a.currentProjectsIndex===o?1:"",c:t.o((t=>n.goToProjectsIndex(o)),o)}))),N:t.o(((...t)=>n.goToProjects&&n.goToProjects(...t))),O:n.getStaticUrl("/static/svg/radar.svg"),P:n.getStaticUrl("/static/svg/analytics.svg")}}]]);s.__runtimeHooks=2,wx.createPage(i);
